From 4bd4c7896934b651b551fe42bca54a622a27e6ba Mon Sep 17 00:00:00 2001
From: Calum Lind <calumlind+deluge@gmail.com>
Date: Mon, 4 Aug 2014 21:42:48 +0100
Subject: [PATCH 10/24] [WebUI] Update from config upon showing plugin page

---
 deluge/plugins/execute/execute/data/execute.js       | 2 +-
 deluge/plugins/extractor/extractor/data/extractor.js | 2 +-
 deluge/plugins/scheduler/scheduler/data/scheduler.js | 7 +------
 3 files changed, 3 insertions(+), 8 deletions(-)

diff --git a/deluge/plugins/execute/execute/data/execute.js b/deluge/plugins/execute/execute/data/execute.js
index 33612c2..d9ed681 100644
--- a/deluge/plugins/execute/execute/data/execute.js
+++ b/deluge/plugins/execute/execute/data/execute.js
@@ -210,7 +210,7 @@ Deluge.ux.preferences.ExecutePage = Ext.extend(Ext.Panel, {
 			}
 		});
 
-		deluge.preferences.on('show', this.onPreferencesShow, this);
+		this.on('show', this.onPreferencesShow, this);
 	},
 
 	updateCommands: function() {
diff --git a/deluge/plugins/extractor/extractor/data/extractor.js b/deluge/plugins/extractor/extractor/data/extractor.js
index 4b29c5b..00712e5 100644
--- a/deluge/plugins/extractor/extractor/data/extractor.js
+++ b/deluge/plugins/extractor/extractor/data/extractor.js
@@ -57,7 +57,7 @@ Deluge.ux.preferences.ExtractorPage = Ext.extend(Ext.Panel, {
             boxLabel: _('Create torrent name sub-folder')
         });
 
-        deluge.preferences.on('show', this.updateConfig, this);
+        this.on('show', this.updateConfig, this);
     },
 
     onApply: function() {
diff --git a/deluge/plugins/scheduler/scheduler/data/scheduler.js b/deluge/plugins/scheduler/scheduler/data/scheduler.js
index 2b3f900..13e549c 100644
--- a/deluge/plugins/scheduler/scheduler/data/scheduler.js
+++ b/deluge/plugins/scheduler/scheduler/data/scheduler.js
@@ -565,7 +565,7 @@ Deluge.ux.preferences.SchedulerPage = Ext.extend(Ext.Panel, {
             decimalPrecision: 0
         });
 
-        deluge.preferences.on('show', this.updateConfig, this);
+        this.on('show', this.updateConfig, this);
     },
 
     onRender: function(ct, position) {
@@ -593,11 +593,6 @@ Deluge.ux.preferences.SchedulerPage = Ext.extend(Ext.Panel, {
         this.onApply();
     },
 
-    afterRender: function() {
-        Deluge.ux.preferences.SchedulerPage.superclass.afterRender.call(this);
-        this.updateConfig();
-    },
-
     updateConfig: function() {
         deluge.client.scheduler.get_config({
             success: function(config) {
-- 
2.1.0

